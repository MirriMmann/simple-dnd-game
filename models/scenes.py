# models/scenes.py

SCENES = {
    "scene_1": {
        "text": """Вы поднимаетесь по крутым, усыпанным мхом откосам, и перед вами предстает древний феерический лес.
Густая листва вечнозелёных деревьев и редкий свет, пробивающийся сквозь паутину ветвей, создают волшебное свечение.
Где-то в глубине леса слышится звонкий щебет птиц и шелест ветра, нежно играющего в вершинах бесчисленных сосен.""",
        "actions": [
            ("go_path", "Исследовать таёжную тропинку вправо", "scene_2a"),
            ("go_leaves", "Пройти сквозь буйство листьев (по светлячкам)", "scene_2b"),
            ("inspect_wheel", "Осмотреть заброшенное колесо", "scene_2c"),
            ("wait", "Подождать / Оглядеться", "scene_2d"),
        ]
    },

    "scene_2a": {
        "text": """Таёжная тропинка уводит вас в темноту. Чем дальше вы идёте, тем глуше становится лес,
а корни деревьев под ногами похожи на руки, пытающиеся вас схватить. Вы чувствуете лёгкий холод.""",
        "actions": [
            ("explore_ruins", "Идти дальше и исследовать полуразрушенную башню", "scene_3a"),
            ("hunt", "Попробовать выследить зверя по следам", "scene_3b"),
            ("camp", "Разбить лагерь и отдохнуть", "scene_3c"),
        ]
    },

    "scene_2b": {
        "text": """Светлячковая тропа выводит вас к сияющему пруду. Вода отражает небо, но в отражении виден не день, а звёздная ночь.
Из воды доносится мелодичный звон, словно зов.""",
        "actions": [
            ("drink_water", "Набрать и попробовать воду", "scene_3c"),
            ("catch_light", "Попробовать поймать светлячка", "scene_3a"),
            ("sing", "Ответить на звон песней", "scene_3b"),
            ("move_on", "Пройти дальше мимо пруда", "scene_3c"),
        ]
    },

    "scene_2c": {
        "text": """Заброшенное колесо заскрипело, когда вы к нему прикоснулись. Сначала оно выглядело пустым,
но потом внутри зашевелились тени, и сквозь ржавчину просочился слабый фиолетовый свет.""",
        "actions": [
            ("search_inside", "Заглянуть внутрь колеса", "scene_3c"),
            ("break_apart", "Разломать колесо", "scene_3c"),
            ("retreat", "Отойти и наблюдать издалека", "scene_3a"),
        ]
    },

    "scene_2d": {
        "text": """Вы остановились, и лес будто ожил вокруг вас. Сначала было тихо, но вскоре вы услышали шорох —
и заметили странное существо с янтарными глазами, следящее за вами из-за деревьев.""",
        "actions": [
            ("approach_creature", "Подойти к существу", "scene_3a"),
            ("hide", "Спрятаться за кустами", "scene_3b"),
            ("shout", "Крикнуть, чтобы отпугнуть", "scene_3c"),
            ("ignore", "Игнорировать и продолжить путь", "scene_3b"),
        ]
    },

    "scene_3a": {
        "text": """Перед вами вырастает полуразрушенная башня. Камни поросли мхом, но наверху мерцает огонёк —
    словно кто-то наблюдает. Дверь приоткрыта и тянет холодом.""",
        "actions": [
            ("enter_tower", "Зайти внутрь башни", None),
            ("climb_wall", "Попробовать взобраться на стену", "scene_after_wall", {
                "check": "1d20+Сила vs 15",
                "fail_scene": "scene_fail_climb"
            }),

            ("circle_tower", "Обойти башню вокруг", None),
        ]
    },

    "scene_fail_climb": {
        "text": """Вы цепляетесь за скользкий камень, но рука срывается. 
        Вы падаете вниз, ударяетесь о землю и получаете урон (1–3 ОЗ).""",
        "actions": [
            ("get_up", "Подняться и попробовать ещё раз", "scene_3a"),
            ("retreat", "Отступить от башни", "scene_2a"),
        ]
    },


    "scene_after_wall": {
        "text": """С трудом вы взбираетесь по скользким камням и оказываетесь на площадке наверху.
    Отсюда виден весь лес — и крошечные огоньки костров вдали. На стене лежит старый сундук.""",
        "actions": [
            ("open_chest", "Открыть сундук", None),
            ("rest", "Присесть и перевести дух", None),
        ]
    },


    "scene_3b": {
        "text": """Следы приводят вас к поляне, где стадо оленей пьёт воду из родника.
Они вас заметили, но пока не убегают. Атмосфера спокойная, но настороженная.""",
        "actions": [
            ("approach_deer", "Медленно подойти ближе", None),
            ("set_trap", "Поставить ловушку у тропы", None),
            ("observe", "Спрятаться и понаблюдать", None),
        ]
    },

    "scene_3c": {
        "text": """Разломав колесо, вы обнаружили в центре странный кристалл, излучающий слабое тепло.
Внутри мерцают искры, словно там заключена энергия молнии.""",
        "actions": [
            ("take_crystal", "Взять кристалл себе", None),
            ("leave_crystal", "Оставить и уйти", None),
            ("touch_crystal", "Прикоснуться рукой", None),
        ]
    },
}
